<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAHÍA CERO | Realism Update</title>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Inter:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. SETTINGS & LIGHTING --- */
        :root {
            --tram-turq: #00d4c0;
            --tram-metal-light: #e2e8f0;
            --tram-metal-dark: #475569;
            --seat-fabric: #334155;
            --led-color: #ffaa00;
            --btn-green: #00ff9d;
            --btn-red: #ff3838;
            
            /* Iluminación Dinámica */
            --light-warm: rgba(255, 220, 180, 0.2);
        }

        body {
            margin: 0; background: #050505; height: 100vh; overflow: hidden;
            font-family: 'Inter', sans-serif; user-select: none;
        }

        /* --- 2. ENTORNO Y CLIMA --- */
        #world-stage { position: absolute; top:0; left:0; width:100%; height:100%; z-index:0; }
        #scenery {
            width: 110%; height: 110%; position: absolute; top:-5%; left:-5%;
            background: url('https://images.unsplash.com/photo-1518066000714-58c45f1a2c0a?q=80&w=2670') center/cover;
            filter: blur(3px) brightness(0.3); transition: filter 2s;
        }
        .rain-fx {
            position: absolute; width:100%; height:100%; 
            background: url('https://www.transparenttextures.com/patterns/stardust.png'); opacity: 0.5;
            animation: rainFall 0.5s infinite steps(4); pointer-events: none;
        }
        @keyframes rainFall { 0% { background-position: 0 0; } 100% { background-position: 5px 15px; } }


        /* --- 3. ESTRUCTURA DEL VAGÓN --- */
        #tram-shell {
            position: absolute; width:100%; height:100%; z-index:10;
            display: flex; flex-direction: column;
            pointer-events: none;
        }

        /* TECHO CON LUCES REALES */
        .ceiling {
            height: 14%; background: var(--tram-metal-light); border-bottom: 6px solid var(--tram-metal-dark);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 5%; position: relative; z-index: 60;
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
        }
        
        /* Focos de Luz Físicos */
        .light-fixture {
            width: 120px; height: 12px; background: #fff;
            border: 2px solid #ccc; border-radius: 4px;
            box-shadow: 0 0 25px rgba(255,255,255,0.8), inset 0 0 5px #fff;
        }
        .pis-panel {
            width: 45%; height: 60%; background: #000; border: 4px solid #222;
            display: flex; align-items: center; overflow: hidden; box-shadow: inset 0 0 20px #000;
        }
        .led-msg {
            font-family: 'Share Tech Mono'; color: var(--led-color); font-size: 1.6rem;
            white-space: nowrap; text-shadow: 0 0 10px var(--led-color);
        }

        /* ILUMINACIÓN VOLUMÉTRICA */
        #volumetric-lights {
            position: absolute; top:0; left:0; width:100%; height:100%; pointer-events: none; z-index: 55;
            background: radial-gradient(ellipse at 50% 0%, var(--light-warm) 0%, transparent 60%);
            mix-blend-mode: overlay;
        }


        /* --- CUERPO PRINCIPAL --- */
        .main-body { flex-grow: 1; display: flex; position: relative; }

        /* ZONA A: PUERTAS (IZQUIERDA) - REALISTA */
        .doors-zone {
            width: 52%; height: 100%; position: relative;
            background: linear-gradient(to right, #cbd5e1, #e2e8f0);
            border-right: 20px solid var(--tram-metal-dark); /* Pilar estructural */
            display: flex; flex-direction: column; justify-content: flex-end;
        }

        /* SISTEMA DE PUERTAS MEJORADO */
        #door-system {
            position: relative; width: 100%; height: 88%; 
            border-top: 25px solid var(--tram-metal-dark); overflow: hidden; pointer-events: auto;
        }
        .door-leaf {
            position: absolute; top:0; width: 50%; height: 100%;
            /* TEXTURA METAL CEPILLADO */
            background: repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,0,0,0.03) 3px), linear-gradient(90deg, #f1f5f9, #cbd5e1);
            /* GOMA INFERIOR REALISTA */
            border-bottom: 20px solid #eab308;
            border-image: linear-gradient(to bottom, #facc15, #ca8a04) 1;
            display: flex; align-items: center; justify-content: center;
            transition: transform 1s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: inset 0 0 30px rgba(0,0,0,0.2); z-index: 10;
        }
        .leaf-l { left: 0; border-right: 5px solid #555; z-index: 12; }
        .leaf-r { right: 0; border-left: 5px solid #555; z-index: 11; }

        .door-glass {
            width: 68%; height: 68%; background: rgba(100, 150, 180, 0.15);
            /* MARCO DE GOMA NEGRA GRUESO */
            border: 15px solid #1a1a1a; border-radius: 8px; position: relative;
            box-shadow: inset 0 0 20px #000, 0 0 5px rgba(0,0,0,0.5);
            backdrop-filter: blur(6px); overflow: hidden;
        }
        .glass-wet { position: absolute; top:0; left:0; width:100%; height:100%; opacity: 0.7; background: url('https://www.transparenttextures.com/patterns/rain.png'); mix-blend-mode: overlay; }

        /* El Botón (Pegado a la hoja derecha) */
        .btn-wrapper {
            position: absolute; top: 50%; left: 20px;
            transform: translateY(-50%); pointer-events: auto; z-index: 100;
        }
        #door-btn {
            width: 85px; height: 85px; background: #1e293b; border-radius: 50%;
            border: 4px solid var(--tram-metal-dark); display: flex; align-items: center; justify-content: center;
            cursor: pointer; box-shadow: 0 5px 20px rgba(0,0,0,0.6); transition: 0.1s;
        }
        #door-btn:active { transform: scale(0.95); }
        #btn-led {
            width: 60px; height: 60px; border-radius: 50%; border: 3px solid #111;
            background: #222; transition: 0.3s; position: relative; display: flex; align-items: center; justify-content: center;
        }
        #btn-led::after { content:'< >'; color:#666; font-weight:900; font-size: 1.2rem; }
        .ready #btn-led { background: radial-gradient(circle, #065f46, #000); border-color: var(--btn-green); box-shadow: 0 0 30px var(--btn-green); animation: pulse 1s infinite; }
        .ready #btn-led::after { color: #fff; }
        .locked #btn-led { border-color: var(--btn-red); }
        @keyframes pulse { 50% { box-shadow: 0 0 50px var(--btn-green); } }
        .doors-open .leaf-l { transform: translateX(-95%); }
        .doors-open .leaf-r { transform: translateX(95%); }


        /* --- ZONA B: PALO Y ASIENTOS (DERECHA) --- */
        .pole-section {
            width: 6%; height: 100%; position: relative; z-index: 40;
            display: flex; justify-content: center; background: rgba(0,0,0,0.1);
        }
        .vertical-pole {
            width: 20px; height: 100%; background: linear-gradient(90deg, #999, #e2e8f0, #999);
            box-shadow: 0 0 20px rgba(0,0,0,0.5); border-left: 1px solid #777; border-right: 1px solid #777;
        }
        #validator {
            position: absolute; top: 40%; width: 75px; height: 120px;
            background: linear-gradient(135deg, #facc15, #ca8a04);
            border: 3px solid #854d0e; border-radius: 12px;
            pointer-events: auto; cursor: pointer; display: flex; justify-content: center;
            box-shadow: 10px 10px 25px rgba(0,0,0,0.5);
        }
        #validator::after { content:'((( )))'; font-weight:bold; color:#5c3600; margin-top: 90px; }
        .val-led { width: 15px; height: 15px; background: #333; border-radius: 50%; margin-top: 25px; position: absolute; transition:0.2s; box-shadow: inset 0 0 5px #000;}
        .val-led.ok { background: #10b981; box-shadow: 0 0 25px #10b981; }


        /* ASIENTOS REALISTAS */
        .seats-zone {
            width: 42%; height: 100%; background: var(--tram-white);
            position: relative; display: flex; flex-direction: column; justify-content: flex-end;
            box-shadow: inset 20px 0 50px rgba(0,0,0,0.2);
        }
        .side-window {
            position: absolute; top:10%; left:10%; width:80%; height:45%;
            background: #000; border: 8px solid var(--tram-metal-dark); border-radius: 10px; overflow: hidden;
        }
        .side-view { width:100%; height:100%; opacity: 0.5; filter: blur(3px); background: url('https://images.unsplash.com/photo-1544735716-392fe2489ffa?q=80&w=2671') center/cover; }

        .seat-bench {
            width: 92%; height: 42%; margin: 0 auto;
            /* TEXTURA TELA TÉCNICA REALISTA */
            background: var(--seat-fabric);
            background-image: repeating-linear-gradient(45deg, rgba(255,255,255,0.03) 0px, rgba(255,255,255,0.03) 1px, transparent 1px, transparent 3px);
            border-radius: 20px 20px 0 0; position: relative;
            box-shadow: 0 -10px 30px rgba(0,0,0,0.4), inset 0 10px 20px rgba(255,255,255,0.05);
            border-bottom: 15px solid #222;
            display: flex; justify-content: space-around;
            /* Costura superior */
            border-top: 3px solid #475569;
        }
        .headrest {
            width: 42%; height: 45px; background: var(--tram-turq);
            margin-top: -25px; border-radius: 10px; position: relative;
            /* Volumen y sombra para parecer mullido */
            box-shadow: 0 5px 10px rgba(0,0,0,0.3), inset 0 -3px 5px rgba(0,0,0,0.2);
            z-index: 5; border-bottom: 3px solid rgba(0,0,0,0.2);
        }

        /* NPCs */
        .shadow-npc {
            position: absolute; bottom: 10px; width: 100px; height: 110px;
            background: #000; border-radius: 50% 50% 0 0; filter: blur(20px);
            opacity: 0; transition: opacity 1s; mix-blend-mode: multiply;
        }
        .npc-active { opacity: 0.7; animation: breathe 4s infinite; }
        @keyframes breathe { 50% { transform: scale(1.03) translateY(-5px); } }


        /* --- SUELO --- */
        .floor {
            height: 20%; background: #1e293b;
            /* Textura goma antideslizante */
            background-image: radial-gradient(#333 3px, transparent 3px); background-size: 18px 18px;
            box-shadow: inset 0 30px 80px rgba(0,0,0,0.8);
            border-top: 5px solid #334155;
        }


        /* --- 4. CONTENIDO HOLOGRAMA (CENTRADO PERFECTO) --- */
        #holo-beam {
            position: absolute; bottom: 20px; left: 26%; transform: translateX(-50%);
            width: 40%; height: 4px; background: var(--tram-turq);
            box-shadow: 0 0 35px var(--tram-turq); z-index: 5; opacity: 0.6;
        }
        #web-content {
            /* CENTRADO ABSOLUTO RELATIVO A LA ZONA DE PUERTAS */
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            width: 75%; height: auto; max-height: 70%; z-index: 5;
            background: rgba(13, 25, 35, 0.95); border: 2px solid var(--tram-turq);
            border-radius: 15px; padding: 35px; text-align: center; color: #fff;
            opacity: 0; transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            display: flex; flex-direction: column; justify-content: center;
            box-shadow: 0 0 100px rgba(0, 203, 179, 0.25);
            backdrop-filter: blur(10px);
        }
        .content-show { opacity: 1 !important; transform: translate(-50%, -50%) scale(1) !important; }

        h1 { font-family: 'Rajdhani'; font-size: 2.8rem; color: var(--tram-turq); margin: 0; letter-spacing: -1px; text-transform: uppercase; text-shadow: 0 0 20px var(--tram-turq);}
        h3 { font-family: 'Share Tech Mono'; color: var(--led-color); margin-bottom: 15px; }
        p { color: #cbd5e1; line-height: 1.6; font-size: 1.1rem; }


        /* --- 5. NAV TABLET --- */
        #tablet {
            position: absolute; bottom: 25px; left: 50%; transform: translateX(-50%);
            background: rgba(15, 23, 42, 0.95); padding: 12px 25px; border-radius: 40px;
            border: 2px solid #475569; display: flex; gap: 10px; z-index: 200; pointer-events: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.6);
        }
        .nav-btn {
            background: transparent; border: 1px solid #444; color: #aaa;
            padding: 8px 18px; border-radius: 25px; cursor: pointer;
            font-family: 'Rajdhani'; font-weight: 700; transition: 0.2s;
        }
        .nav-btn.active { background: var(--tram-turq); color: #000; box-shadow: 0 0 20px rgba(0,203,179,0.4); }
        .nav-btn:disabled { opacity: 0.5; cursor: wait; }

        /* FX */
        .lights-out { filter: brightness(0.05) contrast(1.2); }

    </style>
</head>
<body>

    <div id="world-stage">
        <div id="scenery"></div>
        <div class="rain-fx"></div>
    </div>

    <div id="volumetric-lights"></div>

    <div id="tram-shell">
        
        <div class="ceiling">
            <div class="light-fixture"></div>
            <div class="pis-panel">
                <marquee class="led-msg" scrollamount="9">BAHÍA CERO LÍNEA NOCTURNA >>> DESTINO DESCONOCIDO >>> MANTENGA LA CALMA</marquee>
            </div>
            <div class="light-fixture"></div>
        </div>

        <div class="main-body">
            
            <div class="doors-zone" style="position: relative;">
                <div id="holo-beam"></div>
                <div id="web-content"></div>

                <div id="door-system">
                    <div class="door-leaf leaf-l">
                        <div class="door-glass"><div class="glass-wet"></div></div>
                    </div>
                    <div class="door-leaf leaf-r">
                        <div class="door-glass"><div class="glass-wet"></div></div>
                        <div class="btn-wrapper">
                            <div id="door-btn" class="locked" onclick="handleBtn()">
                                <div id="btn-led"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pole-section">
                <div class="vertical-pole"></div>
                <div id="validator" onclick="validate()"><div class="val-led"></div></div>
            </div>

            <div class="seats-zone">
                <div class="side-window">
                    <div class="side-view"></div>
                    <div class="rain-fx"></div>
                </div>
                
                <div class="seat-bench">
                    <div class="headrest"></div>
                    <div class="headrest"></div>
                    <div class="shadow-npc" style="left:20%"></div>
                    <div class="shadow-npc" style="left:60%"></div>
                </div>
            </div>

        </div>

        <div class="floor"></div>
    </div>

    <div id="tablet">
        <button class="nav-btn active" onclick="travel(0)">INICIO</button>
        <button class="nav-btn" onclick="travel(1)">NOTICIAS</button>
        <button class="nav-btn" onclick="travel(2)">LORE</button>
        <button class="nav-btn" onclick="travel(3)">TIENDA</button>
    </div>

    <script>
        const stops = [
            { name: "BAHÍA CERO", led: "LOBBY", text: "El tren cruza la frontera de la realidad. Los asientos parecen observarte.", btn: "VER VIDEO" },
            { name: "NOTICIAS", led: "UPDATE", text: "Reporte: La textura de la realidad se está desgastando en el vagón 3.", btn: "LEER" },
            { name: "LORE", led: "ARCHIVOS", text: "Los túneles bajo Cádiz esconden ecos de lo que fuimos.", btn: "EXPEDIENTE" },
            { name: "TIENDA", led: "TAQUILLA", text: "Billete de ida. El regreso no está garantizado.", btn: "RESERVAR" }
        ];

        let state = { idx: 0, moving: false, doorsOpen: false, canOpen: false };

        const ui = {
            scene: document.getElementById('scenery'),
            doors: document.getElementById('door-system'),
            holo: document.getElementById('web-content'),
            led: document.querySelector('.led-msg'),
            btn: document.getElementById('door-btn'),
            navs: document.querySelectorAll('.nav-btn'),
            shell: document.getElementById('tram-shell')
        };

        function travel(i) {
            if(state.moving || (i === state.idx && state.doorsOpen)) return;
            ui.navs.forEach(n => n.classList.remove('active'));
            ui.navs[i].classList.add('active');
            state.idx = i;
            if(state.doorsOpen) { closeDoors(); setTimeout(() => startMove(i), 1200); } 
            else { startMove(i); }
        }

        function startMove(i) {
            state.moving = true; state.canOpen = false;
            ui.led.innerText = `>>> DESTINO: ${stops[i].led} >>>`;
            ui.led.style.color = "#ffaa00";
            ui.btn.className = "locked";
            ui.scene.parentElement.classList.add('moving');
            ui.navs.forEach(n => n.disabled = true);
            if(Math.random() > 0.7) triggerFlicker();
            updateShadows();
            setTimeout(() => arrive(i), 3500);
        }

        function arrive(i) {
            state.moving = false;
            ui.scene.parentElement.classList.remove('moving');
            ui.navs.forEach(n => n.disabled = false);
            const data = stops[i];
            ui.holo.innerHTML = `<h3>${data.led}</h3><h1>${data.name}</h1><p>${data.text}</p><button class="action-btn" style="background:#00d4c0; border:none; padding:12px 25px; margin-top:25px; font-weight:bold; cursor:pointer; font-family:'Rajdhani'; font-size:1.1rem;">${data.btn}</button>`;
            ui.led.innerText = `*** ESTACIÓN: ${data.name} *** PULSE BOTÓN`;
            ui.led.style.color = "#00ff9d";
            state.canOpen = true;
            ui.btn.className = "ready";
        }

        function handleBtn() {
            if(state.moving) return;
            if(state.doorsOpen) closeDoors();
            else if(state.canOpen) openDoors();
        }

        function openDoors() {
            state.doorsOpen = true;
            ui.doors.classList.add('doors-open');
            ui.btn.className = "locked";
            setTimeout(() => ui.holo.classList.add('content-show'), 500);
        }

        function closeDoors() {
            state.doorsOpen = false;
            ui.doors.classList.remove('doors-open');
            ui.holo.classList.remove('content-show');
            if(!state.moving && state.canOpen) ui.btn.className = "ready";
        }

        function triggerFlicker() {
            let flickers = 0;
            const interval = setInterval(() => {
                ui.shell.classList.toggle('lights-out');
                flickers++;
                if(flickers > 8) { clearInterval(interval); ui.shell.classList.remove('lights-out'); }
            }, 120);
        }

        function validate() {
            const l = document.querySelector('.val-led'); l.classList.add('ok');
            ui.led.innerText = "BEEP! TÍTULO VÁLIDO";
            setTimeout(() => { l.classList.remove('ok'); if(!state.moving) ui.led.innerText = "ESPERANDO..."; }, 800);
        }

        function updateShadows() {
            document.querySelectorAll('.shadow-npc').forEach(s => {
                if(Math.random() > 0.5) s.classList.add('npc-active'); else s.classList.remove('npc-active');
            });
        }

        setTimeout(() => arrive(0), 500);
        document.querySelectorAll('.shadow-npc')[0].classList.add('npc-active');

    </script>
</body>
</html>
